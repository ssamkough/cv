---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";

const LINKS = [
  { title: "website", url: "https://sammy.pizza" },
  { title: "(862) 239-0100", url: "tel:8622390100" },
  { title: "sammysamkough@gmail.com", url: "mailto:sammysamkough@gmail.com" },
];

const EDUCATION = {
  name: "montclair state university",
  degree: "bachelor of science (b.s.)",
  major: "computer science",
  years: "2016 - 2019",
};

const experienceCollection = (await getCollection("experience"))
  .map(({ data }) => data)
  .filter((item) => !item?.shouldHide)
  .sort((a, b) => {
    if (a.order < b.order) {
      return -1;
    }
    if (a.order > b.order) {
      return 1;
    }
    return 0;
  });
---

<Layout>
  <div class="container">
    <header>
      <h1>sammy samkough</h1>
      <div class="links">
        {LINKS.map(({ title, url }) => <a href={url}>{title}</a>)}
      </div>
    </header>
    <hr />
    <main>
      <section>
        <h2>education</h2>
        <div>
          <span>{EDUCATION.name}</span> |
          <span>{EDUCATION.degree}</span> |
          <span>{EDUCATION.major}</span> |
          <span>{EDUCATION.years}</span>
        </div>
      </section>
      <section>
        <h2>career</h2>
        <div style="display: flex; flex-direction: column; gap: 12px">
          {
            experienceCollection.map(
              ({
                company_name,
                role_name,
                time_worked,
                description,
                technologies,
              }) => (
                <article>
                  <header style="display: flex; justify-content: space-between; gap: 12px">
                    <span>
                      <strong>{company_name}</strong> |{" "}
                      <strong>{role_name}</strong>
                    </span>
                    <address>
                      <span>
                        {time_worked.start.month} {time_worked.start.year}
                      </span>{" "}
                      -{" "}
                      {time_worked?.end ? (
                        <span>
                          {time_worked.end.month} {time_worked.end.year}
                        </span>
                      ) : (
                        <span>present</span>
                      )}
                    </address>
                  </header>
                  <p>{description}</p>
                  <footer>
                    <span>
                      <strong>technologies</strong>:
                    </span>{" "}
                    <span>
                      {technologies.map(
                        (item, index) =>
                          `${item}${index < technologies.length - 1 ? ", " : ""}`
                      )}
                    </span>
                  </footer>
                </article>
              )
            )
          }
        </div>
      </section>
    </main>
    <br />
  </div>
</Layout>

<style>
  .container {
    max-width: 700px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  h1 {
    font-size: 1.4em;
  }
  h2 {
    font-size: 1.2em;
  }
  .links {
    display: flex;
    gap: 12px;
  }
</style>
